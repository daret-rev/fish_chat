{% extends 'base.html' %}
{% block title %}–°–æ–∑–¥–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ{% endblock %}

{% block content %}
<section class="hero-section">
    <div class="container">
        <!-- –ö–Ω–æ–ø–∫–∞ –Ω–∞–∑–∞–¥ -->
        <div style="margin-bottom: 30px;">
            <a href="{{ url_for('DB_management') }}" style="text-decoration: none;">
                <button class="btn-left" style="padding: 8px 20px; font-size: 14px;">
                    ‚Üê –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–Ω–∫–æ–º –∑–∞–¥–∞–Ω–∏–π
                </button>
            </a>
        </div>

        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
        <div style="text-align: center; margin-bottom: 40px;">
            <h1 class="hero-title" style="margin-bottom: 15px;">–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ</h1>
            <p style="color: #6c757d; font-size: 1.1rem; max-width: 800px; margin: 0 auto;">
                –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å –¥–ª—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ —É—á–∞—â–∏—Ö—Å—è
            </p>
        </div>

        <!-- –§–æ—Ä–º–∞ -->
        <div style="
            max-width: 800px;
            margin: 0 auto 50px;
            background: white;
            border-radius: 12px;
            padding: 40px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            border: 1px solid #e9ecef;
        ">
            <form method="post">
                <!-- –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è -->
                <div style="margin-bottom: 30px;">
                    <label style="display: block; margin-bottom: 10px; font-weight: 600; color: #2c3e50;">
                        <div style="display: flex; align-items: center; margin-bottom: 8px;">
                            <div style="
                                background-color: #007bff;
                                color: white;
                                width: 30px;
                                height: 30px;
                                border-radius: 50%;
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                margin-right: 10px;
                                font-size: 1rem;
                            ">
                                1Ô∏è‚É£
                            </div>
                            –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è:
                        </div>
                    </label>
                    <textarea
                        name="text"
                        rows="4"
                        style="
                            width: 100%;
                            padding: 12px 15px;
                            border: 1px solid #ced4da;
                            border-radius: 8px;
                            font-size: 1rem;
                            resize: vertical;
                            transition: border-color 0.3s ease;
                        "
                        onfocus="this.style.borderColor='#007bff'; this.style.boxShadow='0 0 0 0.2rem rgba(0,123,255,.25)';"
                        onblur="this.style.borderColor='#ced4da'; this.style.boxShadow='none';"
                        placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏..."
                    ></textarea>
                    <small style="color: #6c757d; display: block; margin-top: 5px;">
                        –¢–µ–∫—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è —É—á–∞—â–∏–º—Å—è –≤–æ –≤—Ä–µ–º—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
                    </small>
                </div>

                <!-- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç -->
                <div style="margin-bottom: 30px;">
                    <label style="display: block; margin-bottom: 10px; font-weight: 600; color: #2c3e50;">
                        <div style="display: flex; align-items: center; margin-bottom: 8px;">
                            <div style="
                                background-color: #28a745;
                                color: white;
                                width: 30px;
                                height: 30px;
                                border-radius: 50%;
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                margin-right: 10px;
                                font-size: 1rem;
                            ">
                                2Ô∏è‚É£
                            </div>
                            –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç:
                        </div>
                    </label>
                    <select
                        name="correct"
                        style="
                            width: 100%;
                            padding: 12px 15px;
                            border: 1px solid #ced4da;
                            border-radius: 8px;
                            font-size: 1rem;
                            background-color: white;
                            transition: border-color 0.3s ease;
                        "
                        onfocus="this.style.borderColor='#007bff'; this.style.boxShadow='0 0 0 0.2rem rgba(0,123,255,.25)';"
                        onblur="this.style.borderColor='#ced4da'; this.style.boxShadow='none';"
                    >
                        <option value="yes">–î–∞ (–º–æ—à–µ–Ω–Ω–∏–∫)</option>
                        <option value="no">–ù–µ—Ç (—Ä–µ–∞–ª—å–Ω–∞—è –Ω–æ–≤–æ—Å—Ç—å)</option>
                    </select>
                    <small style="color: #6c757d; display: block; margin-top: 5px;">
                        –í—ã–±–µ—Ä–∏—Ç–µ, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –º–æ—à–µ–Ω–Ω–∏—á–µ—Å–∫–∏–º
                    </small>
                </div>

                <!-- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ -->
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 30px; margin-bottom: 30px;">
                    <!-- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –æ—Ç–≤–µ—Ç–µ -->
                    <div>
                        <label style="display: block; margin-bottom: 10px; font-weight: 600; color: #2c3e50;">
                            <div style="display: flex; align-items: center; margin-bottom: 8px;">
                                <div style="
                                    background-color: #17a2b8;
                                    color: white;
                                    width: 30px;
                                    height: 30px;
                                    border-radius: 50%;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    margin-right: 10px;
                                    font-size: 1rem;
                                ">
                                    ‚úÖ
                                </div>
                                –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –æ—Ç–≤–µ—Ç–µ:
                            </div>
                        </label>
                        <textarea
                            name="comment_yes"
                            rows="3"
                            style="
                                width: 100%;
                                padding: 12px 15px;
                                border: 1px solid #ced4da;
                                border-radius: 8px;
                                font-size: 1rem;
                                resize: vertical;
                                transition: border-color 0.3s ease;
                            "
                            onfocus="this.style.borderColor='#007bff'; this.style.boxShadow='0 0 0 0.2rem rgba(0,123,255,.25)';"
                            onblur="this.style.borderColor='#ced4da'; this.style.boxShadow='none';"
                            placeholder="–û–±—ä—è—Å–Ω–µ–Ω–∏–µ, –ø–æ—á–µ–º—É –æ—Ç–≤–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π..."
                        ></textarea>
                        <small style="color: #6c757d; display: block; margin-top: 5px;">
                            –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –æ—Ç–≤–µ—Ç–µ —É—á–∞—â–µ–≥–æ—Å—è
                        </small>
                    </div>

                    <!-- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ø—Ä–∏ –Ω–µ–≤–µ—Ä–Ω–æ–º –æ—Ç–≤–µ—Ç–µ -->
                    <div>
                        <label style="display: block; margin-bottom: 10px; font-weight: 600; color: #2c3e50;">
                            <div style="display: flex; align-items: center; margin-bottom: 8px;">
                                <div style="
                                    background-color: #dc3545;
                                    color: white;
                                    width: 30px;
                                    height: 30px;
                                    border-radius: 50%;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    margin-right: 10px;
                                    font-size: 1rem;
                                ">
                                    ‚ùå
                                </div>
                                –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ø—Ä–∏ –Ω–µ–≤–µ—Ä–Ω–æ–º –æ—Ç–≤–µ—Ç–µ:
                            </div>
                        </label>
                        <textarea
                            name="comment_no"
                            rows="3"
                            style="
                                width: 100%;
                                padding: 12px 15px;
                                border: 1px solid #ced4da;
                                border-radius: 8px;
                                font-size: 1rem;
                                resize: vertical;
                                transition: border-color 0.3s ease;
                            "
                            onfocus="this.style.borderColor='#007bff'; this.style.boxShadow='0 0 0 0.2rem rgba(0,123,255,.25)';"
                            onblur="this.style.borderColor='#ced4da'; this.style.boxShadow='none';"
                            placeholder="–û–±—ä—è—Å–Ω–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ –∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç..."
                        ></textarea>
                        <small style="color: #6c757d; display: block; margin-top: 5px;">
                            –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –æ—Ç–≤–µ—Ç–µ —É—á–∞—â–µ–≥–æ—Å—è
                        </small>
                    </div>
                </div>

                <!-- –¶–µ–Ω—ã –∑–∞ –æ—Ç–≤–µ—Ç—ã -->
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 30px; margin-bottom: 40px;">
                    <!-- –¶–µ–Ω–∞ –∑–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç -->
                    <div>
                        <label for="price_correct" style="display: block; margin-bottom: 10px; font-weight: 600; color: #2c3e50;">
                            <div style="display: flex; align-items: center; margin-bottom: 8px;">
                                <div style="
                                    background-color: #28a745;
                                    color: white;
                                    width: 30px;
                                    height: 30px;
                                    border-radius: 50%;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    margin-right: 10px;
                                    font-size: 1rem;
                                ">
                                    üèÜ
                                </div>
                                –¶–µ–Ω–∞ –∑–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç:
                            </div>
                        </label>
                        <input
                            type="number"
                            step="1"
                            name="price_correct"
                            id="price_correct"
                            required
                            style="
                                width: 100%;
                                padding: 12px 15px;
                                border: 1px solid #ced4da;
                                border-radius: 8px;
                                font-size: 1rem;
                                transition: border-color 0.3s ease;
                            "
                            onfocus="this.style.borderColor='#007bff'; this.style.boxShadow='0 0 0 0.2rem rgba(0,123,255,.25)';"
                            onblur="this.style.borderColor='#ced4da'; this.style.boxShadow='none';"
                            placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 10"
                        >
                        <small style="color: #6c757d; display: block; margin-top: 5px;">
                            –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–ª–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—É—á–∏—Ç —É—á–∞—â–∏–π—Å—è –∑–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
                        </small>
                    </div>

                    <!-- –¶–µ–Ω–∞ –∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç -->
                    <div>
                        <label for="price_wrong" style="display: block; margin-bottom: 10px; font-weight: 600; color: #2c3e50;">
                            <div style="display: flex; align-items: center; margin-bottom: 8px;">
                                <div style="
                                    background-color: #dc3545;
                                    color: white;
                                    width: 30px;
                                    height: 30px;
                                    border-radius: 50%;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    margin-right: 10px;
                                    font-size: 1rem;
                                ">
                                    üìâ
                                </div>
                                –¶–µ–Ω–∞ –∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç:
                            </div>
                        </label>
                        <input
                            type="number"
                            step="1"
                            name="price_wrong"
                            id="price_wrong"
                            required
                            style="
                                width: 100%;
                                padding: 12px 15px;
                                border: 1px solid #ced4da;
                                border-radius: 8px;
                                font-size: 1rem;
                                transition: border-color 0.3s ease;
                            "
                            onfocus="this.style.borderColor='#007bff'; this.style.boxShadow='0 0 0 0.2rem rgba(0,123,255,.25)';"
                            onblur="this.style.borderColor='#ced4da'; this.style.boxShadow='none';"
                            placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: -5"
                        >
                        <small style="color: #6c757d; display: block; margin-top: 5px;">
                            –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–ª–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—É—á–∏—Ç —É—á–∞—â–∏–π—Å—è –∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç (–º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º)
                        </small>
                    </div>
                </div>

                <!-- –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ -->
                <div style="text-align: center; padding-top: 20px; border-top: 1px solid #e9ecef;">
                    <button
                        type="submit"
                        style="
                            padding: 14px 40px;
                            font-size: 16px;
                            font-weight: 600;
                            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
                            color: white;
                            border: none;
                            border-radius: 8px;
                            cursor: pointer;
                            transition: all 0.3s ease;
                            display: inline-flex;
                            align-items: center;
                            gap: 10px;
                        "
                        onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 15px rgba(40,167,69,0.3)';"
                        onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none';"
                    >
                        <span style="font-size: 1.2rem;">üíæ</span>
                        –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
                    </button>
                </div>
            </form>
        </div>

        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å -->
        <div style="
            max-width: 800px;
            margin: 0 auto;
            background: #f8f9fa;
            border-radius: 12px;
            padding: 25px;
            border-left: 4px solid #17a2b8;
        ">
            <div style="display: flex; align-items: flex-start;">
                <div style="
                    background-color: #17a2b8;
                    color: white;
                    width: 45px;
                    height: 45px;
                    border-radius: 50%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    margin-right: 15px;
                    flex-shrink: 0;
                    font-size: 1.3rem;
                ">
                    üí°
                </div>
                <div>
                    <h3 style="margin: 0 0 10px 0; color: #2c3e50;">–°–æ–≤–µ—Ç—ã –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞:</h3>
                    <ul style="margin: 0; padding-left: 20px; color: #6c757d;">
                        <li>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –º–æ—à–µ–Ω–Ω–∏—á–µ—Å–∫–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π</li>
                        <li>–î–æ–±–∞–≤–ª—è–π—Ç–µ –ø–æ–¥—Ä–æ–±–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è –ª—É—á—à–µ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è</li>
                        <li>–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ –±–∞–ª–ª—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –≤–æ–ø—Ä–æ—Å–∞</li>
                        <li>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—é</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</section>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const form = document.querySelector('form');

        form.addEventListener('submit', function(event) {
            event.preventDefault(); // –°–Ω–∞—á–∞–ª–∞ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –æ—Ç–ø—Ä–∞–≤–∫—É

            // –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
            const text = document.querySelector('textarea[name="text"]');
            const commentYes = document.querySelector('textarea[name="comment_yes"]');
            const commentNo = document.querySelector('textarea[name="comment_no"]');
            const priceCorrect = document.getElementById('price_correct');
            const priceWrong = document.getElementById('price_wrong');

            let isValid = true;
            let errorMessage = '';

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—è "–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è"
            if (!text.value.trim()) {
                markFieldInvalid(text, '–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è');
                isValid = false;
            } else {
                markFieldValid(text);
            }

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—è "–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –æ—Ç–≤–µ—Ç–µ"
            if (!commentYes.value.trim()) {
                markFieldInvalid(commentYes, '–í–≤–µ–¥–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞');
                isValid = false;
            } else {
                markFieldValid(commentYes);
            }

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—è "–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ø—Ä–∏ –Ω–µ–≤–µ—Ä–Ω–æ–º –æ—Ç–≤–µ—Ç–µ"
            if (!commentNo.value.trim()) {
                markFieldInvalid(commentNo, '–í–≤–µ–¥–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –¥–ª—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞');
                isValid = false;
            } else {
                markFieldValid(commentNo);
            }

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—è "–¶–µ–Ω–∞ –∑–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç"
            if (!priceCorrect.value.trim() || isNaN(parseInt(priceCorrect.value))) {
                markFieldInvalid(priceCorrect, '–í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ');
                isValid = false;
            } else {
                markFieldValid(priceCorrect);
            }

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—è "–¶–µ–Ω–∞ –∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç"
            if (!priceWrong.value.trim() || isNaN(parseInt(priceWrong.value))) {
                markFieldInvalid(priceWrong, '–í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ');
                isValid = false;
            } else {
                markFieldValid(priceWrong);
            }

            // –ï—Å–ª–∏ –≤—Å–µ –ø–æ–ª—è –≤–∞–ª–∏–¥–Ω—ã, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ñ–æ—Ä–º—É
            if (isValid) {
                // –£–±–∏—Ä–∞–µ–º –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
                removeAllErrorMessages();

                // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤–∏–∑—É–∞–ª—å–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
                const submitBtn = form.querySelector('button[type="submit"]');
                const originalText = submitBtn.innerHTML;
                submitBtn.innerHTML = '<span style="font-size: 1.2rem;">‚è≥</span> –°–æ—Ö—Ä–∞–Ω—è–µ–º...';
                submitBtn.disabled = true;
                submitBtn.style.opacity = '0.7';

                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ñ–æ—Ä–º—É —á–µ—Ä–µ–∑ 500–º—Å –¥–ª—è –ª—É—á—à–µ–≥–æ UX
                setTimeout(() => {
                    form.submit();
                }, 500);
            } else {
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–±—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
                showErrorMessage('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è');
            }
        });

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–º–µ—Ç–∫–∏ –ø–æ–ª—è –∫–∞–∫ –Ω–µ–≤–∞–ª–∏–¥–Ω–æ–≥–æ
        function markFieldInvalid(field, message) {
            field.style.borderColor = '#dc3545';
            field.style.boxShadow = '0 0 0 0.2rem rgba(220,53,69,.25)';

            // –£–±–∏—Ä–∞–µ–º —Å—Ç–∞—Ä—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–µ –¥–ª—è —ç—Ç–æ–≥–æ –ø–æ–ª—è
            const existingError = field.parentNode.querySelector('.field-error');
            if (existingError) {
                existingError.remove();
            }

            // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
            const errorDiv = document.createElement('div');
            errorDiv.className = 'field-error';
            errorDiv.style.color = '#dc3545';
            errorDiv.style.fontSize = '0.85rem';
            errorDiv.style.marginTop = '5px';
            errorDiv.style.display = 'flex';
            errorDiv.style.alignItems = 'center';
            errorDiv.style.gap = '5px';
            errorDiv.innerHTML = `<span style="font-size: 0.9rem;">‚ö†Ô∏è</span> ${message}`;

            field.parentNode.appendChild(errorDiv);
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–º–µ—Ç–∫–∏ –ø–æ–ª—è –∫–∞–∫ –≤–∞–ª–∏–¥–Ω–æ–≥–æ
        function markFieldValid(field) {
            field.style.borderColor = '#28a745';
            field.style.boxShadow = '0 0 0 0.2rem rgba(40,167,69,.25)';

            // –£–±–∏—Ä–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–µ
            const existingError = field.parentNode.querySelector('.field-error');
            if (existingError) {
                existingError.remove();
            }

            // –î–æ–±–∞–≤–ª—è–µ–º –∏–∫–æ–Ω–∫—É —É—Å–ø–µ—Ö–∞
            const existingSuccess = field.parentNode.querySelector('.field-success');
            if (!existingSuccess) {
                const successDiv = document.createElement('div');
                successDiv.className = 'field-success';
                successDiv.style.color = '#28a745';
                successDiv.style.fontSize = '0.85rem';
                successDiv.style.marginTop = '5px';
                successDiv.style.display = 'flex';
                successDiv.style.alignItems = 'center';
                successDiv.style.gap = '5px';
                successDiv.innerHTML = '<span style="font-size: 0.9rem;">‚úÖ</span> –ó–∞–ø–æ–ª–Ω–µ–Ω–æ';

                field.parentNode.appendChild(successDiv);
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ –æ–±—â–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–µ
        function showErrorMessage(message) {
            // –£–±–∏—Ä–∞–µ–º —Å—Ç–∞—Ä–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
            const existingAlert = document.querySelector('.alert-error');
            if (existingAlert) {
                existingAlert.remove();
            }

            // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
            const alertDiv = document.createElement('div');
            alertDiv.className = 'alert-error';
            alertDiv.style.position = 'fixed';
            alertDiv.style.top = '20px';
            alertDiv.style.right = '20px';
            alertDiv.style.backgroundColor = '#dc3545';
            alertDiv.style.color = 'white';
            alertDiv.style.padding = '15px 20px';
            alertDiv.style.borderRadius = '8px';
            alertDiv.style.boxShadow = '0 4px 12px rgba(0,0,0,0.15)';
            alertDiv.style.zIndex = '1000';
            alertDiv.style.display = 'flex';
            alertDiv.style.alignItems = 'center';
            alertDiv.style.gap = '10px';
            alertDiv.style.maxWidth = '400px';
            alertDiv.innerHTML = `
                <span style="font-size: 1.2rem;">‚ö†Ô∏è</span>
                <div>
                    <strong>–û—à–∏–±–∫–∞!</strong><br>
                    <span style="font-size: 0.9rem;">${message}</span>
                </div>
                <button onclick="this.parentElement.remove()" style="
                    background: none;
                    border: none;
                    color: white;
                    font-size: 1.5rem;
                    cursor: pointer;
                    margin-left: auto;
                    padding: 0;
                ">√ó</button>
            `;

            document.body.appendChild(alertDiv);

            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä—ã–≤–∞–µ–º —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
            setTimeout(() => {
                if (alertDiv.parentNode) {
                    alertDiv.remove();
                }
            }, 5000);
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± –æ—à–∏–±–∫–∞—Ö
        function removeAllErrorMessages() {
            const errorMessages = document.querySelectorAll('.field-error, .field-success, .alert-error');
            errorMessages.forEach(el => el.remove());
        }

        // –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ –≤–≤–æ–¥–µ (live validation)
        const allFields = document.querySelectorAll('textarea, input[type="number"]');
        allFields.forEach(field => {
            field.addEventListener('input', function() {
                if (this.value.trim()) {
                    this.style.borderColor = '#ced4da';
                    this.style.boxShadow = 'none';

                    const errorDiv = this.parentNode.querySelector('.field-error');
                    if (errorDiv) {
                        errorDiv.remove();
                    }
                }
            });

            field.addEventListener('blur', function() {
                if (!this.value.trim()) {
                    this.style.borderColor = '#dc3545';
                    this.style.boxShadow = '0 0 0 0.2rem rgba(220,53,69,.25)';
                }
            });
        });
    });
</script>
{% endblock %}
{% set show_footer = False %}