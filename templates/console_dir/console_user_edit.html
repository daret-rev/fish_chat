{% extends 'base.html' %}

{% block title %}–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è{% endblock %}

{% block content %}
<style>
    .edit-form {
        max-width: 600px;
        margin: 0 auto;
        background: white;
        padding: 30px;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }
    
    .form-group {
        margin-bottom: 25px;
    }
    
    .form-label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: #2c3e50;
    }
    
    .form-input {
        width: 100%;
        padding: 12px 15px;
        border: 1px solid #ced4da;
        border-radius: 6px;
        font-size: 1rem;
        transition: all 0.3s ease;
    }
    
    .form-input:focus {
        outline: none;
        border-color: #007bff;
        box-shadow: 0 0 0 3px rgba(0,123,255,0.1);
    }
    
    .role-selector {
        display: flex;
        gap: 15px;
        margin-top: 10px;
    }
    
    .role-option {
        flex: 1;
        padding: 15px;
        border: 2px solid #e9ecef;
        border-radius: 8px;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s ease;
    }
    
    .role-option:hover {
        border-color: #007bff;
        background: #f8f9fa;
    }
    
    .role-option.selected {
        border-color: #007bff;
        background: rgba(0,123,255,0.1);
    }
    
    .role-option input {
        display: none;
    }
    
    .role-name {
        font-weight: 600;
        margin-top: 8px;
    }
    
    .role-description {
        font-size: 0.85rem;
        color: #6c757d;
        margin-top: 5px;
    }
</style>

<div class="container">
    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <div style="margin-bottom: 30px;">
        <a href="{{ url_for('console_users') }}" style="text-decoration: none; color: #007bff; display: inline-block; margin-bottom: 20px;">
            ‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        </a>
        <h1>‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h1>
        <p style="color: #6c757d;">{{ user.username }}</p>
    </div>
    
    <!-- –§–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
    <div class="edit-form">
        <form method="POST">
            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ -->
            <div class="form-group">
                <label class="form-label">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
                <input type="text" class="form-input" value="{{ user.username }}" disabled>
                <small style="color: #6c757d; display: block; margin-top: 5px;">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ–ª—å–∑—è –∏–∑–º–µ–Ω–∏—Ç—å</small>
            </div>
            
            <!-- –í—ã–±–æ—Ä —Ä–æ–ª–∏ -->
            <div class="form-group">
                <label class="form-label">–†–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
                <div class="role-selector">
                    <!-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å -->
                    <label class="role-option {% if user.privileges == 0 %}selected{% endif %}">
                        <input type="radio" name="privileges" value="0" {% if user.privileges == 0 %}checked{% endif %}>
                        <div style="font-size: 2rem;">üë§</div>
                        <div class="role-name">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</div>
                        <div class="role-description">–ú–æ–∂–µ—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —Ç–µ—Å—Ç—ã –∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</div>
                    </label>
                    
                    <!-- –£—á–∏—Ç–µ–ª—å -->
                    <label class="role-option {% if user.privileges == 1 %}selected{% endif %}">
                        <input type="radio" name="privileges" value="1" {% if user.privileges == 1 %}checked{% endif %}>
                        <div style="font-size: 2rem;">üë®‚Äçüè´</div>
                        <div class="role-name">–£—á–∏—Ç–µ–ª—å</div>
                        <div class="role-description">–ú–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç–µ—Å—Ç—ã –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –≥—Ä—É–ø–ø–∞–º–∏</div>
                    </label>
                    
                    <!-- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä -->
                    <label class="role-option {% if user.privileges == 2 %}selected{% endif %}">
                        <input type="radio" name="privileges" value="2" {% if user.privileges == 2 %}checked{% endif %}>
                        <div style="font-size: 2rem;">üëë</div>
                        <div class="role-name">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</div>
                        <div class="role-description">–ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º —Å–∏—Å—Ç–µ–º—ã</div>
                    </label>
                </div>
            </div>
            
            <!-- –°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è -->
            <div class="form-group">
                <label class="form-label">–°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è</label>
                <input type="password" name="new_password" class="form-input" placeholder="–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å (–æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º, —á—Ç–æ–±—ã –Ω–µ –º–µ–Ω—è—Ç—å)">
                <small style="color: #6c757d; display: block; margin-top: 5px;">–ï—Å–ª–∏ –≤–≤–µ–¥–µ—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å, –æ–Ω –±—É–¥–µ—Ç –∏–∑–º–µ–Ω–µ–Ω</small>
            </div>
            
            <!-- –ö–Ω–æ–ø–∫–∏ -->
            <div style="display: flex; gap: 15px; margin-top: 40px;">
                <button type="submit" style="
                    flex: 1;
                    padding: 15px;
                    background: #007bff;
                    color: white;
                    border: none;
                    border-radius: 8px;
                    font-size: 1rem;
                    font-weight: 600;
                    cursor: pointer;
                ">
                    üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
                </button>
                
                <a href="{{ url_for('console_users') }}" style="
                    flex: 1;
                    padding: 15px;
                    background: #6c757d;
                    color: white;
                    border: none;
                    border-radius: 8px;
                    font-size: 1rem;
                    font-weight: 600;
                    cursor: pointer;
                    text-decoration: none;
                    text-align: center;
                ">
                    ‚ùå –û—Ç–º–µ–Ω–∞
                </a>
            </div>
        </form>
    </div>
    
    <!-- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ -->
    {% if user.username == session.get('curent_user') %}
    <div style="
        background: #fff3cd;
        border: 1px solid #ffc107;
        border-radius: 8px;
        padding: 20px;
        margin-top: 30px;
        color: #856404;
    ">
        ‚ö†Ô∏è <strong>–í–Ω–∏–º–∞–Ω–∏–µ:</strong> –í—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç–µ —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å. 
        –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–æ–ª–∏ –º–æ–∂–µ—Ç –ø–æ–≤–ª–∏—è—Ç—å –Ω–∞ –≤–∞—à–∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞.
    </div>
    {% endif %}
</div>

<script>
    // –í—ã–±–æ—Ä —Ä–æ–ª–∏
    document.querySelectorAll('.role-option').forEach(option => {
        option.addEventListener('click', function() {
            document.querySelectorAll('.role-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            this.classList.add('selected');
            this.querySelector('input').checked = true;
        });
    });
</script>
{% endblock %}
{% set show_footer = False %}